<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manutenção</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Favicon (using image.png as 32x32 icon) -->
    <link rel="icon" href="image.png" type="image/png" sizes="32x32">
    <style>
        #UserAlert{
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 18px 20px;
            justify-content: center;
            text-align: center;
            border-radius: 10px;
            background: linear-gradient(90deg, rgba(220,163,158,0.12), rgba(220,163,158,0.04));
            color: #5b1f1a;
            box-shadow: 0 6px 18px rgba(1,36,74,0.08);
            /* border-left: 4px solid var(--azul-happy, #0b66ff); */
            font-weight: 600;
            font-size: 0.95rem;
            line-height: 1.3;
            max-width: 100%;
            transition: transform .18s ease, box-shadow .18s ease, opacity .18s ease;
            will-change: transform, opacity;
            margin-top: 12px;
        }

        /* animação sutil, respeita preferência por reduzir movimento */
        @media (prefers-reduced-motion: no-preference) {
            #UserAlert {
                animation: slideIn 360ms ease both;
            }
            @keyframes slideIn {
                from { transform: translateY(6px); opacity: 0; }
                to   { transform: translateY(0);     opacity: 1; }
            }
        }
    </style>
</head>
<body onload="definitions(), calcular()">
    <header class="header" content="Precificação de Kit"></header>
    <main>
        <div id="container" class="container">
            <form>
            <div style="display: flex; flex-direction: row; gap: 16px;">
                <div style="margin-top: 16px; display: flex; align-items: center; gap: 10px;">
                    <input type="checkbox" id="Isclient" onchange="calcular()"checked >
                    <label for="Isclient" style="margin: 0; font-size: 0.95rem; color: var(--azul-happy);">Cliente Happy</label>
                </div>
                <div style="margin-top: 16px; display: flex; align-items: center; gap: 10px;">
                    <input type="checkbox" id="AddMonitorim" onchange="calcular()" checked>
                    <label for="AddMonitorim" style="margin: 0; font-size: 0.95rem; color: var(--azul-happy);">Adicionar Monitoramento</label>
                </div>
            </div>

                <label for="quantidadeModulos">Quantidade de módulos</label>
                <div class="input-group">
                    <span class="material-icons icon">grid_on</span>
                    <input type="number" id="quantidadeModulos" value="10" min="1" step="1" inputmode="numeric" placeholder="Ex: 10">
                </div>
                
                <label for="Potencia">Potência dos Módulos (W)</label>
                <div class="input-group">
                    <span class="material-icons icon">solar_power</span>
                    <input type="number" id="Potencia" value="610" min="400" step="5" inputmode="numeric" placeholder="Ex: 610">
                </div>

                <button type="button" onclick="calcular()" class="button">
                    <span class="material-icons icon">calculate</span> Calcular
                </button>
            </form>
                <div style="margin-top:24px; padding:18px 14px; background:var(--cinza-claro); border-radius:12px; box-shadow:0 2px 8px rgba(1,36,74,0.07); text-align:center;">
                <p style="font-size:1.25em; font-weight:700; color:var(--azul-happy); margin-bottom:10px;">Preço final (custo total): <strong id="precoFinal">R$ 23.968,64</strong></p>
                <p style="font-size:1.15em; font-weight:500; color:var(--azul-happy);">Geração estimada: <strong id="geracao">847,90 Kwh/mês</strong></p>
            </div>
            
        </div>
    </main>
    <footer class="footer"></footer>
    <script>
        function calcular(){
            const consts = {
                "ConstIrad":0.139,
                "ConstLimpSemLucro":25,
                "ConstLimpComLucro":35,
                "ConstFatiaMonitoramento":30
            };

            const Isclient = document.getElementById("Isclient").checked;
            const AddMonitorim = document.getElementById("AddMonitorim").checked;
            const nModulos = document.getElementById("quantidadeModulos").value;
            const nPotencia = document.getElementById("Potencia").value;
            
            const precoFinalDisplay = document.getElementById('precoFinal');
            const geracaolDisplay = document.getElementById('geracao');

            let Monitoramento = AddMonitorim ? nModulos * nPotencia * consts.ConstIrad / consts.ConstFatiaMonitoramento : 0;
            
            let Limpeza = Isclient ? 
                (AddMonitorim ? consts.ConstLimpSemLucro * nModulos : consts.ConstLimpComLucro * nModulos) :
                consts.ConstLimpComLucro * nModulos;
            let total = (Math.round((Monitoramento + Limpeza) / 5) * 5)-0.05;

            precoFinalDisplay.textContent = `R$ ${priceInputMask(total.toFixed(2))}`;
            geracaolDisplay.textContent = `${(nModulos * nPotencia * consts.ConstIrad).toFixed(2).replace('.', ',')} Kwh/mês`;
        }
    </script>
    <script src="Utiles.js"></script>
    <script src="templates.js"></script>
</body>
</html>